<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>基本信息认证</title>
    <!--rem布局-->
    <script src="js/reset_font.js"></script>
    <link rel="stylesheet" href="font/iconfont.css">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/person-center.css">
</head>
<body style="padding-bottom: 0;">
<!--头部-->
<div class="public-head m-flex-box">
    <a href="javascript:;" class="back"><span class="back-icon"></span></a>
    <h2 class="m-flex public-head-title">基本信息认证</h2>
    <!--<a href="javascript:;" class="public-right-btn">修改</a>-->
</div>
<!--基本信息认证-->
<div class="attestation-box">
    <div class="attestation-top m-flex-box">
        <a href="javascript:;">
            <span class="att-count att-count-line active">1</span>
            <p>上传信息</p>
        </a>
        <a href="javascript:;">
            <span class="att-count att-count-line">2</span>
            <p>认证资料</p>
        </a>
        <a href="javascript:;">
            <span class="att-count">3</span>
            <p>提交审核</p>
        </a>
    </div>

    <div class="doctor-info-box js-doctor-change">
        <!--信息列表-->
        <ul class="doctor-info-list">
            <li class="m-flex-box flex-vc">
                <div class="m-flex">所在医院</div>
                <div class="doctor-info-text"><input type="text" readonly="" id="hospital" value="未填写"></div>
            </li>
            <li class="m-flex-box flex-vc">
                <div class="m-flex">所属科室</div>
                <div class="doctor-info-text"><input type="text" readonly="" id="ksclass" value="未填写"></div>
            </li>
            <li class="m-flex-box flex-vc">
                <div class="m-flex">职称</div>
                <div class="doctor-info-text"><input type="text" readonly="" id="zhicheng" value="未填写"></div>
            </li>
            <li class="m-flex-box flex-vc">
                <div class="m-flex">姓名</div>
                <div class="doctor-info-text"><input type="text" readonly="" id="name" value="未填写"></div>
            </li>
            <li class="m-flex-box flex-vc">
                <div class="m-flex">职业编号</div>
                <div class="doctor-info-text"><input type="text" readonly="" id="bianhao" value="未填写"></div>
            </li>
            <li class="m-flex-box flex-vc">
                <div class="m-flex">擅长</div>
                <div class="doctor-info-text"><input type="text" readonly="" id="shanchang" value="未填写"></div>
            </li>
            <li class="m-flex-box flex-vc">
                <div class="m-flex">简介</div>
                <div class="doctor-info-text"><input type="text" readonly="" id="jianjie" value="未填写"></div>
            </li>
        </ul>
        <a href="javascript:;" class="btn js-next">下一步</a>
    </div>

</div>
<!--医院-->
<div id="date"></div>
<!--科室-->
<div id="date2"></div>
<!--职称-->
<div id="date3"></div>
<!--内容填写-->
<div class="content-madel">
    <!--填写姓名-->
    <div class="content-name " id="name-box">
        <div class="multi-picker-btn-box">
            <div class="multi-picker-btn content-madel-btn back-btn" >返回</div>
            <div class="multi-picker-btn content-madel-btn js-sub-name" >提交</div>
        </div>
        <div class="content-name-inp">
            <input type="text" placeholder="请输入真实姓名" class="inp" id="name-inp">
        </div>
    </div>
    <!--职业编号-->
    <div class="content-name" id="bianhao-box">
        <div class="multi-picker-btn-box">
            <div class="multi-picker-btn content-madel-btn back-btn" >返回</div>
            <div class="multi-picker-btn content-madel-btn js-sub-bh" >提交</div>
        </div>
        <div class="content-name-inp">
            <input type="text" placeholder="请输入职业编号" class="inp" id="bianhao-inp">
        </div>

    </div>
    <!--擅长-->
    <div class="content-name" id="shanchang-box">
        <div class="multi-picker-btn-box">
            <div class="multi-picker-btn content-madel-btn back-btn" >返回</div>
            <div class="multi-picker-btn content-madel-btn js-sub-ly" >提交</div>
        </div>
        <div class="content-name-inp">
            <input type="text" placeholder="请输入擅长领域" class="inp" id="shanchang-inp">
        </div>

    </div>
    <!--简介-->
    <div class="content-name" id="jianjie-box">
        <div class="multi-picker-btn-box">
            <div class="multi-picker-btn content-madel-btn back-btn" >返回</div>
            <div class="multi-picker-btn content-madel-btn js-sub-jj" >提交</div>
        </div>
        <div class="content-name-inp">
            <input type="text" placeholder="请输入个人简介" class="inp" id="jianjie-inp">
        </div>

    </div>
</div>
</body>
</html>
<script src="js/jquery-1.11.2.min.js"></script>
<!--联动-->
<link rel="stylesheet" href="datePicker/css/MultiPicker.css">
<script src="datePicker/js/city.js"></script>
<script src="datePicker/js/MultiPicker.js"></script>
<!--end-->
<script src="plug/layer_mobile/layer.js"></script>
<script src="js/main.js"></script>
<script>
    //验证

    function reg(){
        var hospital = $.trim($("#hospital").val());
        var ksclass = $.trim($("#ksclass").val());
        var zhicheng = $.trim($("#zhicheng").val());
        var realname = $.trim($("#name").val());
        var practice_num = $.trim($("#bianhao").val());
        var descr = $.trim($("#shanchang").val());
        var famous = $.trim($("#jianjie").val());
        var place = hospital.split("--");
        if (hospital == "未填写" ||hospital =="") {
            layer.open({
                "skin":"msg",
                "content":"请选择医院",
                "time":1
            });
            return false;
        }else if(ksclass == "" || ksclass == "未填写"){
            layer.open({
                "skin":"msg",
                "content":"请选择所属科室",
                "time":1
            });
            return false;
        }else if(zhicheng == "" || zhicheng == "未填写"){
            layer.open({
                "skin":"msg",
                "content":"请选择职称",
                "time":1
            });
            return false;
        }else if(realname == ""||realname=="未填写"){
            layer.open({
                "skin":"msg",
                "content":"请填写真实姓名",
                "time":1
            });
            return false;
        }else if(practice_num == ""||practice_num=="未填写"){
            layer.open({
                "skin":"msg",
                "content":"请填写执业编号",
                "time":1
            });
            return false;
        }if(descr == ""||descr=="未填写"){
            layer.open({
                "skin":"msg",
                "content":"请填写医生简介",
                "time":1
            });
            return false;
        }else if(famous == ""||famous=="未填写"){
            layer.open({
                "skin":"msg",
                "content":"请填写医生擅长",
                "time":1
            });
            return false;
        }
        return true;
    }

//   验证姓名/职称/擅长/简介
    function _reg(container,inp){
        this.container = container;

        this._inp_class= $(this.container).find(inp).attr('id');

        this._inp = $.trim($(this.container).find(inp).val());

        this.reg_box = function(){

            if(this._inp=="" && this._inp_class=="name-inp"){
                layer.open({
                    skin:"msg",
                    content:"请输入姓名",
                    time:1
                });
                return false;
            }else if(this._inp=="" && this._inp_class=="bianhao-inp"){
                layer.open({
                    skin:"msg",
                    content:"请输入职业编号",
                    time:1
                });
                return false;
            }else if(this._inp=="" && this._inp_class=="shanchang-inp"){
                layer.open({
                    skin:"msg",
                    content:"请输入擅长领域",
                    time:1
                });
                return false;
            }else if(this._inp=="" && this._inp_class=="jianjie-inp"){
                layer.open({
                    skin:"msg",
                    content:"请输入个人简介",
                    time:1
                });
                return false;
            }


            $('.content-madel').removeClass('on');
            $('.content-name').removeClass('active');
            return true;


        }

    };


    //医院
    new MultiPicker({
        input: 'hospital',//点击触发插件的input框的id
        container: 'date',//插件插入的容器id
        jsonData:$city,
        success: function (arr) {
            var val = JSON.stringify(arr);//JSON格式的字符串
            var arr2 = [];
            $.each(arr, function(index,el) {
                arr2.push(el.value);

            });

            $('#hospital').val(arr2.join("-"));
        }//回调
    });

//    科室
    new MultiPicker({
        input: 'ksclass',//点击触发插件的input框的id
        container: 'date2',//插件插入的容器id
        jsonData: $city,
        success: function (arr) {

            var val = JSON.stringify(arr);//JSON格式的字符串
            var arr2 = [];
            $.each(arr, function(index,el) {
                arr2.push(el.value);
            });

            $('#ksclass').val(arr2.join("-"));
        }//回调
    });

    //职称
    new MultiPicker({
        input: 'zhicheng',//点击触发插件的input框的id
        container: 'date3',//插件插入的容器id
        jsonData: $city,
        success: function (arr) {

            var val = JSON.stringify(arr);//JSON格式的字符串
            var arr2 = [];
            $.each(arr, function(index,el) {
                arr2.push(el.value);

            });

            $('#zhicheng').val(arr2.join("-"));
        }//回调
    });

    //姓名
    $('#name').on('touchstart',function(){

        $('.content-madel').addClass('on');

        $('#name-box').addClass('active');
    });

    //职业编号

    $('#bianhao').on('click',function(){
        $('.content-madel').addClass('on');

        $('#bianhao-box').addClass('active');
    });


//    擅长
    $('#shanchang').on('click',function(){
        $('.content-madel').addClass('on');

        $('#shanchang-box').addClass('active');

    });
    //    简介
    $('#jianjie').on('click',function(){
        $('.content-madel').addClass('on');

        $('#jianjie-box').addClass('active');

    });

    $('.back-btn').on('click',function(){


       $(this).closest('.content-madel').removeClass('on');
       $(this).closest('.content-name').removeClass('active');
    })

    //验证姓名
$('.js-sub-name').on('click',function(){
    var name = new _reg('#name-box','.inp').reg_box();
    if(!name){
        return false;
    }

    var name = $('#name-inp').val();

    $('#name').val(name);


});
    //验证职业编号
$('.js-sub-bh').on('click',function(){
    var bh = new _reg('#bianhao-box','.inp').reg_box();
    if(!bh){
        return false;
    }
    var bh_val = $('#bianhao-inp').val();

    $('#bianhao').val(bh_val);
});
    //验证擅长
$('.js-sub-ly').on('click',function(){
    var ly = new _reg('#shanchang-box','.inp').reg_box();
    if(!ly){
        return false;
    }
    var ly_val = $('#shanchang-inp').val();

    $('#shanchang').val(ly_val);
});
    //验证简介
$('.js-sub-jj').on('click',function(){
    var jj = new _reg('#jianjie-box','.inp').reg_box();
    if(!jj){
        return false;
    }
    var jj_val = $('#jianjie-inp').val();

    $('#jianjie').val(jj_val);
});


//提交验证


    $('.js-next').on('click',function () {

        if(!reg()){
            return false;
        }

        window.location.href = "attestation-info2.html"


    });



//------------------------------------------------------>>

//       关闭模态

    $('.content-madel').on('click',function(event){
            var target = event.target;

            var tarName = target.className;

            switch(tarName){
                case "content-madel on" :
                    $('.content-madel').removeClass('on');
                    $('.content-name').removeClass('active');
            }

    });


</script>